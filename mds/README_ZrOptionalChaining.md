### 什么是可选链

可选链运算符（?.）允许您在不需要显式null检查的情况下访问属性或方法。如果链中的任何中间属性为null，则表达式会短路，并将结果设置为null。

### 什么是`elvis`表达式

`elvis`表达式是<kbd>groovy</kbd>、<kbd>kotlin</kbd>中的一种语法糖，允许你使用`?:`来处理表达式为null时的情况。\
当左侧表达式为null时，表达式会短路，并返回右侧表达式的值。(如果左侧表达式返回值为基本类型，只会用来处理可选链情况)

### 赋值语句

赋值语句很特殊，在kotlin中不允许在等式左侧使用可选链，当可选链不满足时语句无异议。\
在Zircon中，左侧可选链是允许的。先执行左侧语句获得可赋值对象，然后执行右侧语句，如果可赋值对象为null，右侧语句不会进行赋值。

### 默认值

1. 如果可选链后续使用`elvis`表达式,表达式的右侧值会作为可选链的表达式的默认值
2. 如果不使用`elvis`表达式。对于原链最终方法返回值：如果返回值是非基本类型，原链返回空；
   **如果返回值是基本类型，抛出空指针异常**，ide插件会强提示该情况，避免因返回值类型错误导致运行时错误

### 和拓展方法的组合使用

拓展方法会视为普通方法进行参与链式调用。


### 可选链中的括号

可选链中括号不可忽略，如果可选链中一部分链被括号包裹，该链会被拆分为不同的链路，并分别进行判断。
> `(a?.b).c`，`a?.b`会被视为单独的链路，当a为空时，`(a?.b)`会返回null，`(a?.b).c`会出现空指针异常。

### 特殊情况
1. `TestClass.valNull?.staticCall()`

如果不使用可选链，不会报错，但是会调用`TestClass.staticCall()`。\
如果使用可选链，不会执行`TestClass.staticCall()`。
> java中，静态方法调用的调用者如果为null，不会导致空指针异常，而是会根据其类型，正确调用静态方法。\
> 但是如果使用了可选链，为了保持空值检查的一致性，会检查可选链使用处的对象是否为null，如果为null，短路该链路。